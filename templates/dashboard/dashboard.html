{% extends "base.html" %}

{% block title %}Dashboard{% endblock title %}

{% block content %}
<div class="container mt-5 d-flex justify-content-center">
    <div class="card shadow-lg border-0 p-4" style="max-width: 600px; width: 100%;">
        <!-- Encabezado -->
        <div class="text-center mb-3">
            <h2>Hola de nuevo, {{ user.first_name }} 👋</h2>
            <p class="text-muted">Aquí tienes un resumen de tu equipo y proyecto.</p>
        </div>

        <!-- Información del Equipo -->
        <div class="border-bottom pb-3">
            <h5 class="text-primary">🏆 Tu equipo</h5>
            {% if user.team_assigned %}
                <p><strong>Equipo </strong> {{ user.team_assigned.id }}</p>
                <p><strong>Integrantes:</strong> {{ user.team_assigned.members.count }}</p>
                <a href="{% url 'team_detail' user.team_assigned.id %}" class="btn btn-outline-primary btn-sm">Ver detalles</a>
            {% else %}
                <p class="text-muted">Aún no perteneces a un equipo.</p>
                <a href="{% url 'join_team' %}" class="btn btn-secondary btn-sm">Unirse a un equipo</a>
            {% endif %}
        </div>

        <!-- Información del Proyecto -->
        <div class="pt-3">
            <h5 class="text-success">📌 Proyecto asignado</h5>
            {% if user.team_assigned and user.team_assigned.project %}
                <p><strong>Título:</strong> {{ user.team_assigned.project.title }}</p>
                <p><strong>Fase:</strong> {{ user.team_assigned.project.project_phase }}</p>
                <p><strong>Fecha límite:</strong> {{ user.team_assigned.project.end_date|default:"Sin definir" }}</p>
                <a href="{% url 'project_detail' user.team_assigned.project.id %}" class="btn btn-outline-success btn-sm">Ver detalles</a>
            {% else %}
                <p class="text-muted">Aún no tienes un proyecto asignado.</p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
